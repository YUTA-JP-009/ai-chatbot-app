# 社内ルール対応AIチャットボット開発プロジェクト

## 1. プロジェクト概要

### 目的
OneDriveやGoogle Driveに保管されている社内規程のドキュメント（PDF, Excel等）を学習し、社員がChatworkから質問すると自動で回答するAIチャットボットを開発する。

### 技術スタック
- **AI基盤**: Google Cloud Platform (GCP)
  - **AIサービス**: Vertex AI Search & Conversation
  - **AIモデル**: Gemini (Flashシリーズなど高速なモデルを想定)
  - **データ連携**: Cloud Functions
- **アプリケーション**: Next.js (App Router)
- **ホスティング**: Vercel
- **連携サービス**:
  - Chatwork API (Webhook)
  - Microsoft Graph API (OneDrive)
  - Google Drive API

### その他要件
- **応答性能**: 原則3秒以内の高速応答を目指す。ストリーミング応答やキャッシュも視野に入れる。
Githubへのコミット名は日本語で記載する。

---

## 2. これまでの進捗サマリー

### Step 1: GCPのセットアップ
- GCPプロジェクトを新規作成済み。
- 以下のAPIを有効化済み。
  - `Vertex AI API`
  - `Cloud Functions API`
  - `Cloud Storage API`
- Vercelからの認証用として**サービスアカウントを作成済み**。
- 認証情報が記載された**JSONキーファイルをダウンロード済み**。

### Step 2: 開発環境のセットアップ
- `npx create-next-app`コマンドで、ローカルPCに`ai-chatbot-app`という名称のNext.jsプロジェクトを作成済み。
- 以下の構成でセットアップ済み。
  - Linter: ESLint
  - Tailwind CSS: Yes
  - `src/` directory: Yes
  - App Router: Yes

### Step 3: VercelとGitHubのセットアップ
- GitHubにリポジトリを作成し、ローカルのNext.jsプロジェクトをプッシュ済み。
- Vercelにプロジェクトを作成し、GitHubリポジトリと連携済み。
- Vercelの環境変数に以下を設定済み。
  - `BOT_PREFIX`: `お調べしています...` (Added 4h ago)
  - `BOT_PERSONALITY`: `friendly` (Added 4h ago)
  - `GCP_DATA_STORE_ID`: `internal-rules-cloudstorage_175...` (Updated 19h ago)
  - `GCP_CREDENTIALS`: ダウンロードしたJSONキーファイルの中身を全て設定 (Added Sep 23)
  - `CHATWORK_WEBHOOK_TOKEN`: `kBPhP7ID9abRMautz//FHPSEN2z0B4NN...` (Updated Sep 23)
  - `CHATWORK_API_TOKEN`: `d5d750c100c3351b9a6508aa9c65d7c2` (Added Sep 15)
  - `CHATWORK_MY_ID`: `jp-aichat` (Added Sep 15)
  - `GCP_PROJECT_ID`: `ai-chatbot-prod-472104` (Added Sep 15)

### Step 4: APIエンドポイントの作成
- ChatworkからのWebhookを受け取るためのAPIルートとして、以下のファイルを正しい階層に作成済み。
  - **ファイルパス**: `app/api/chatwork/route.ts`
- 上記ファイルに、Webhookリクエストの受け取りと、GCPのAIを呼び出す関数の雛形コードを貼り付け済み。

### Step 5: Discovery Engine（Data Store）の設定
- **Data Store名**: `internal-rules-search`
- **Collection ID**: `175794210581`
- **リージョン**: `global`
- **接続済みのアプリ**: `internal-rules-search`
- **データソース**: Google Drive連携済み（ドライブID: `1vAFoU52a84plm8thsOUyVf54JjIh57wX`）
- **コネクタの状態**: 有効（接続済み）
- **自動同期**: 有効

---

### データソース（GCPに格納した社内ルール）

株式会社AAA 社内ルール
１．勤務・勤怠に関するルール
勤務形態: コアタイム付きフレックスタイム制
コアタイム: 11:00～16:00（この時間帯は原則として業務に従事）
フレキシブルタイム: 7:00～11:00 および 16:00～21:00
リモートワーク: 週3日まで選択可能。
所属チームの状況に応じて柔軟に運用。
入社後3ヶ月間のOJT期間は、原則週4日以上出社。
パワーナップ制度:
13:00～15:00の間で、20分以内の仮眠（昼寝）を推奨。
仮眠室または自席での仮眠が可能。
ノー残業デー:
毎週水曜日は全社一斉ノー残業デー。19:00には完全退社を徹底。
２．会議・コミュニケーションに関するルール
会議の時間:
社内会議は原則30分以内。
会議の招待には、必ずアジェンダ（議題）とゴール（会議の着地点）を記載すること。
チャットツール利用ガイドライン:
メンション: 緊急時を除き、@all や @channel の使用は避ける。
分報(Times)チャンネル: 各自が任意で作成し、業務のログや気づき、ちょっとしたつぶやきを発信する場として活用を推奨。
スタンプ・絵文字: ポジティブなコミュニケーションを促進するため、積極的な活用を推奨。
シャッフルランチ:
毎月第2木曜日に、部署や役職を越えてランダムに組まれた4人組でランチ。
費用は1人1,500円まで会社が補助。
３．福利厚生・手当に関するルール
書籍購入・セミナー参加費補助:
自己成長を目的とした書籍購入や外部セミナーへの参加費用を、月額10,000円まで補助。
リモートワーク手当:
リモートワークの環境整備を目的として、月額5,000円を支給。
アニバーサリー休暇:
本人や家族の誕生日、結婚記念日など、自身が定めた記念日に年間1日特別休暇を取得可能。
ピアボーナス制度:
従業員同士が日々の感謝や称賛をポイントとして送り合える制度。
貯まったポイントは、月末にインセンティブとして換金可能。
４．オフィス環境に関するルール
座席:
部署ごとに大まかなエリアが決められたフリーアドレス制。
集中したい時は、予約制の「サイレントブース」を利用可能。
服装:
完全服装自由。ただし、社外の方と会う際はTPOをわきまえること。
毎週金曜日は「カジュアルフライデー」とし、好きなバンドTシャツやキャラクターTシャツの着用も可能。
フリードリンク・フリースナック:
コーヒー、お茶、ミネラルウォーターは常時無料。
毎週月曜日の朝に、健康志向のシリアルやナッツ、フルーツが補充される。
５．その他ユニークなルール
部活動支援制度:
従業員が5名以上集まれば、部活動として会社に申請可能。
認定された部には、活動費として月額上限20,000円を補助（例：フットサル部、ボードゲーム部、サウナ部など）。
副業:
事前申請・承認制で副業を許可。本業に支障が出ない範囲で、自身のスキルアップに繋がる活動を推奨。
サンクスカード:
毎月末、日頃の感謝を伝えたい相手に手書きのメッセージカードを渡す文化。オフィス内に専用ポストを設置。


